{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nexport async function fetchImages(query, page) {\n  const API_KEY = '43227181-d0d7712551e06c0c43f074b98';\n  const perPage = 15;\n  const url = 'https://pixabay.com/api/';\n\n  try {\n    const response = await axios.get(url, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n      }\n    });\n\n    if (response.status !== 200) {\n      throw new Error('Failed to fetch images');\n    }\n\n    if (!response.data.hits || response.data.hits.length === 0) {\n      return { data: [], error: 'No images found' };\n    }\n\n    return { data: response.data, error: null };\n  } catch (error) {\n    return { data: [], error: error.message };\n  }\n}\n","export function showLoadingAnimation() {\n  document.querySelector('.loader').style.display = 'block';\n}\n\nexport function hideLoadingAnimation() {\n  document.querySelector('.loader').style.display = 'none';\n}\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt'\n});\nconst gallery = document.querySelector(\".gallery\");\n\nfunction galleryItemsMarkup(arr) {\n  return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads, id }) =>\n      `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\" id=\"image-${id}\">\n              <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\">\n          </a>\n          <div class=\"image-specs\">\n              <div class=\"specs-box\"><p>Likes</p><p>${likes}</p></div>\n              <div class=\"specs-box\"><p>Views</p><p>${views}</p></div>\n              <div class=\"specs-box\"><p>Comments</p><p>${comments}</p></div>\n              <div class=\"specs-box\"><p>Downloads</p><p>${downloads}</p></div>\n          </div>\n      </li>`\n  ).join('');\n}\n\nexport function renderImages(images) {\n  const newImagesMarkup = galleryItemsMarkup(images);\n  gallery.insertAdjacentHTML(\"beforeend\", newImagesMarkup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  if (gallery) {\n    gallery.innerHTML = \"\";\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages, showLoadingAnimation, hideLoadingAnimation, clearGallery } from \"./js/render-functions\";\n\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst searchForm = document.getElementById(\"search-form\");\nconst searchInput = document.getElementById(\"search-input\");\nconst searchBtn = document.querySelector(\".search-btn\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\n\nconst perPage = 15;\nlet page = 1;\nlet query = \"\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  if (loadMoreBtn) {\n    loadMoreBtn.addEventListener(\"click\", onBtnClick);\n  }\n\n  if (searchForm) {\n    searchForm.addEventListener(\"submit\", onFormSubmit);\n  }\n});\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  searchBtn.disabled = true;\n  showLoadingAnimation();\n  clearGallery();\n  loadMoreBtn.style.display = \"none\";\n  query = searchInput.value.trim();\n  if (query !== \"\") {\n    page = 1;\n    try {\n      const images = await fetchImages(query, page);\n      searchInput.value = \"\";\n      if (!images || !images.data || !images.data.hits || images.data.hits.length === 0 || images.totalHits === 0) {\n        iziToast.info({\n          title: \"Information\",\n          message: \"Вибачте, за вашим запитом не знайдено зображень. Будь ласка, спробуйте ще раз!\",\n          position: \"topRight\",\n          backgroundColor: \"red\",\n          maxWidth: \"500px\"\n        });\n      } else {\n        renderImages(images.data.hits);\n        lightbox.refresh();\n        if (images.data.hits.length < perPage) {\n          loadMoreBtn.style.display = \"none\";\n        } else {\n          loadMoreBtn.style.display = \"block\";\n        }\n      }\n    } catch (error) {\n      console.error(\"Помилка під час отримання зображень:\", error);\n    } finally {\n      searchBtn.disabled = false;\n      hideLoadingAnimation();\n    }\n  }\n}\n\n\nasync function onBtnClick() {\n  page += 1;\n  showLoadingAnimation();\n  try {\n    const images = await fetchImages(query, page);\n\n    renderImages(images.data.hits);\n\n    const totalHits = images.totalHits;\n\n    if ((page * perPage) >= totalHits || images.data.hits.length < perPage) {\n      loadMoreBtn.style.display = \"none\";\n    } else {\n      loadMoreBtn.style.display = \"block\";\n    }\n\n    if (images.data.hits.length < perPage) {\n      loadMoreBtn.style.display = \"none\"; \n    }\n\n    const card = document.querySelector(\".gallery-item\");\n\n    if (card) {\n      const cardHeight = card.getBoundingClientRect().height;\n      window.scrollBy({\n        left: 0,\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n      });\n    }\n    if (images.data.hits.length === 0 || (totalHits > 0 && page >= Math.ceil(totalHits / perPage))) {\n      loadMoreBtn.style.display = \"none\";\n      iziToast.info({\n        title: \"Information\",\n        message: \"Вибачте, але ви досягли кінця результатів пошуку.\",\n        position: \"topRight\",\n        backgroundColor: \"red\",\n        maxWidth: \"500px\"\n      });\n      loadMoreBtn.style.display = \"none\";\n    }\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    alert(error.message);\n  } finally {\n    hideLoadingAnimation();\n  }\n}\n"],"names":["fetchImages","query","page","API_KEY","url","response","axios","error","showLoadingAnimation","hideLoadingAnimation","lightbox","SimpleLightbox","gallery","galleryItemsMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","id","renderImages","images","newImagesMarkup","clearGallery","loadMoreBtn","searchForm","searchInput","searchBtn","perPage","onBtnClick","onFormSubmit","event","iziToast","totalHits","card","cardHeight"],"mappings":"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"}