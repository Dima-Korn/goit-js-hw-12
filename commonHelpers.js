import{a as I,S as y,i as g}from"./assets/vendor-6e0bf343.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerPolicy&&(t.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?t.credentials="include":o.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(o){if(o.ep)return;o.ep=!0;const t=s(o);fetch(o.href,t)}})();async function h(r,e){const s="43227181-d0d7712551e06c0c43f074b98",o="https://pixabay.com/api/";try{const t=await I.get(o,{params:{key:s,q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,page:e,per_page:15}});if(t.status!==200)throw new Error("Failed to fetch images");return!t.data.hits||t.data.hits.length===0?{data:[],error:"No images found"}:{data:t.data,error:null}}catch(t){return{data:[],error:t.message}}}const S=new y(".gallery a",{captionDelay:250,captionsData:"alt"});function q(r){return r.map(({webformatURL:e,largeImageURL:s,tags:i,likes:o,views:t,comments:l,downloads:L,id:x})=>`<li class="gallery-item">
          <a href="${s}" id="image-${x}">
              <img src="${e}" alt="${i}" width="360">
          </a>
          <div class="image-specs">
              <div class="specs-box"><p>Likes</p><p>${o}</p></div>
              <div class="specs-box"><p>Views</p><p>${t}</p></div>
              <div class="specs-box"><p>Comments</p><p>${l}</p></div>
              <div class="specs-box"><p>Downloads</p><p>${L}</p></div>
          </div>
      </li>`).join("")}function b(r){const e=document.querySelector(".gallery"),s=q(r);e.insertAdjacentHTML("beforeend",s),S.refresh()}const a=document.querySelector(".load-more-btn"),p=document.getElementById("search-form"),u=document.getElementById("search-input"),f=document.querySelector(".search-btn"),d=document.querySelector(".loader"),m=document.querySelector(".gallery"),E=15;let n=1,c="";const $=new y(".gallery a",{captionDelay:250,captionsData:"alt"});document.addEventListener("DOMContentLoaded",()=>{a&&a.addEventListener("click",P),p&&p.addEventListener("submit",M)});async function M(r){if(r.preventDefault(),f.disabled=!0,v(),B(),c=u.value.trim(),c!==""){n=1;try{const e=await h(c,n);n*E>=e.totalHits?(console.log("last"),a.style.display="none"):a.style.display="block",u.value="",!e||!e.data.hits||e.data.hits.length===0?(g.info({title:"Information",message:"Вибачте, за вашим запитом не знайдено зображень. Будь ласка, спробуйте ще раз!",position:"topRight",backgroundColor:"red",maxWidth:"500px"}),a.style.display="none"):(b(e.data.hits),$.refresh())}catch(e){console.error("Помилка під час отримання зображень:",e)}finally{f.disabled=!1,w()}}}async function P(){n+=1,v();try{const r=await h(c,n);b(r.data.hits);const e=r.totalHits;n*15>=e?a.style.display="none":a.style.display="block";const s=document.querySelector(".gallery-item");if(s){const i=s.getBoundingClientRect().height;window.scrollBy({left:0,top:i*2,behavior:"smooth"})}(r.data.hits.length===0||e>0&&n>=Math.ceil(e/15))&&(a.style.display="none",g.info({title:"Information",message:"Вибачте, але ви досягли кінця результатів пошуку.",position:"topRight",backgroundColor:"red",maxWidth:"500px"}))}catch(r){console.error("Error fetching images:",r),alert(r.message)}finally{w()}}function v(){d&&(d.style.display="block")}function w(){d&&(d.style.display="none")}function B(){m&&(m.innerHTML="")}
//# sourceMappingURL=commonHelpers.js.map
